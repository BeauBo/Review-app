!function(e){var t={};function n(a){if(t[a])return t[a].exports;var l=t[a]={i:a,l:!1,exports:{}};return e[a].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.w={},n(n.s=28)}([function(e,t){e.exports=require("react")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(18),s=(a=o)&&a.__esModule?a:{default:a};var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fetch=this.fetch.bind(this)}return r(e,[{key:"signUp",value:function(e,t,n){var a=this;return this.fetch("/signup",{method:"POST",body:JSON.stringify({username:e,password:t,department:n})}).then(function(e){return e.token&&a.setToken(e.token),Promise.resolve(e)})}},{key:"addEmployee",value:function(e,t,n){return this.fetch("/signup",{method:"POST",body:JSON.stringify({username:e,password:t,department:n})}).then(function(e){return Promise.resolve(e)})}},{key:"deleteEmployee",value:function(e){return this.fetch("/admin/delete",{method:"POST",body:JSON.stringify({username:e})}).then(function(e){return Promise.resolve(e)})}},{key:"getReviews",value:function(e){return this.fetch("/admin/getreviews",{method:"POST",body:JSON.stringify({username:e})}).then(function(e){return Promise.resolve(e)})}},{key:"addReview",value:function(e,t,n){return this.fetch("/admin/addreview",{method:"POST",body:JSON.stringify({username:e,content:t,byWhom:n})}).then(function(e){return Promise.resolve(e)})}},{key:"updateReview",value:function(e,t,n){return this.fetch("/admin/updatereview",{method:"POST",body:JSON.stringify({reviewId:e,content:t,byWhom:n})}).then(function(e){return Promise.resolve(e)})}},{key:"assign",value:function(e,t){return this.fetch("/admin/assign",{method:"POST",body:JSON.stringify({reviewee:e,reviewers:t})}).then(function(e){return Promise.resolve(e)})}},{key:"login",value:function(e,t){var n=this;return this.fetch("/login",{method:"POST",body:JSON.stringify({username:e,password:t})}).then(function(e){return e.token&&n.setToken(e.token),Promise.resolve(e)})}},{key:"logout",value:function(){localStorage.removeItem("token")}},{key:"setToken",value:function(e){localStorage.setItem("token",e)}},{key:"getToken",value:function(){var e=localStorage.getItem("token");return e||!1}},{key:"getProfile",value:function(){return!!this.getToken()&&(0,s.default)(this.getToken())}},{key:"getEmployeeList",value:function(){return this.fetch("/admin/employees",{method:"POST"}).then(function(e){return Promise.resolve(e)})}},{key:"getEmployeeInfo",value:function(e){return this.fetch("/admin/employeeinfo",{method:"POST",body:JSON.stringify({username:e})}).then(function(e){return Promise.resolve(e)})}},{key:"updateEmployeeInfo",value:function(e,t,n,a,l){return this.fetch("/admin/updateemployeeinfo",{method:"POST",body:JSON.stringify({username:e,department:t,email:n,phone:a,address:l})}).then(function(e){return Promise.resolve(e)})}},{key:"setEmployeeInfo",value:function(e,t,n,a,l){return this.fetch("/admin/set-employee-info",{method:"POST",body:JSON.stringify({username:e,email:t,phone:n,address:a,password:l})}).then(function(e){return Promise.resolve(e)})}},{key:"deleteRevieweeList",value:function(e,t){return this.fetch("/admin/delete-reviewee-list",{method:"POST",body:JSON.stringify({reviewee:e,reviewer:t})}).then(function(e){return Promise.resolve(e)})}},{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){return fetch(e,l({headers:{Accept:"application/json","Access-Control-Allow-Origin":"*","Content-Type":"application/json"}},t)).then(this._checkStatus).then(function(e){return e.json()})})},{key:"_checkStatus",value:function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}}]),e}();t.default=i},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("reactstrap")},function(e,t){e.exports=require("express")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,l=n(3),r=(a=l)&&a.__esModule?a:{default:a};var o=new(0,r.default.Schema)({username:{type:String,require:!0},content:{type:String},byWhom:{type:String}}),s=r.default.model("Reviews",o);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,l=n(3),r=(a=l)&&a.__esModule?a:{default:a};var o=r.default.Schema,s=new o({email:{type:String},phone:{type:String},address:{type:String}}),i=new o({name:{type:String}}),u=new o({username:{type:String,required:!0,unique:!0},password:{type:String,required:!0},department:{type:String,require:!0},info:s,list:[i]}),d=r.default.model("Employee",u);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,l=n(3),r=(a=l)&&a.__esModule?a:{default:a};var o=new(0,r.default.Schema)({username:{type:String,required:!0,unique:!0},password:{type:String,required:!0},department:{type:String,required:!0}}),s=r.default.model("Admin",o);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),r=i(l),o=i(n(1)),s=n(2);function i(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={username:"",password:""},n.Auth=new o.default,n.handleChange=n.handleChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),a(t,[{key:"render",value:function(){return r.default.createElement("div",{className:"d-flex flex-column login"},r.default.createElement("img",{src:"https://www.paytm.ca/wp-content/uploads/thegem-logos/logo_1c55b24df15390a4bc761ca8db08e4c4_1x.png"}),r.default.createElement("form",{onSubmit:this.handleSubmit},r.default.createElement("input",{type:"text",name:"username",placeholder:"Enter username",onChange:this.handleChange,className:"form-control"}),r.default.createElement("input",{type:"password",name:"password",placeholder:"Enter password",onChange:this.handleChange,className:"form-control"}),r.default.createElement("input",{type:"submit",value:"Log In",className:"btn btn-success form-control",disabled:!this.state.username||!this.state.password})),r.default.createElement("p",null,"Don't have an account ? ",r.default.createElement(s.Link,{to:"/"},"Sign up")))}},{key:"handleChange",value:function(e){var t,n,a;this.setState((t={},n=e.target.name,a=e.target.value,n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.Auth.login(this.state.username,this.state.password).then(function(e){if(!e.success)return alert(e.error);t.props.history.replace("/"+t.state.username)})}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),r=u(l),o=n(4),s=u(n(1)),i=n(2);function u(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={user:{},revieweeList:[],modalAdd:!1,reviewee:""},n.Auth=new s.default,n.add=n.add.bind(n),n.handleChange=n.handleChange.bind(n),n.addToggle=n.addToggle.bind(n),n.saveAdd=n.saveAdd.bind(n),n.logout=n.logout.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),a(t,[{key:"componentDidMount",value:function(){var e=this,t=this.Auth.getProfile();t&&this.Auth.getEmployeeInfo(t.user.username).then(function(t){e.setState({user:t.employeeInfo,revieweeList:t.employeeInfo.list})})}},{key:"add",value:function(e){var t=e.currentTarget.dataset.reviewee;this.setState({reviewee:t,modalAdd:!this.state.modalAdd})}},{key:"saveAdd",value:function(){var e=this;this.Auth.addReview(this.state.reviewee,this.state.reviewContent,this.state.user.username),this.Auth.deleteRevieweeList(this.state.reviewee,this.state.user.username).then(function(){var t=e.state.revieweeList.filter(function(t){return t.name!==e.state.reviewee});e.setState({revieweeList:t,modalAdd:!e.state.modalAdd})})}},{key:"addToggle",value:function(){this.setState({modalAdd:!this.state.modalAdd})}},{key:"handleChange",value:function(e){var t,n,a;this.setState((t={},n=e.target.name,a=e.target.value,n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t))}},{key:"addModal",value:function(){return r.default.createElement(o.Modal,{isOpen:this.state.modalAdd,toggle:this.addToggle},r.default.createElement(o.ModalHeader,{toggle:this.addToggle},r.default.createElement("h2",null,"Add new review for ",this.state.reviewee)),r.default.createElement(o.ModalBody,null,r.default.createElement("textarea",{name:"reviewContent",placeholder:"Enter review here",onChange:this.handleChange})),r.default.createElement(o.ModalFooter,null,r.default.createElement(o.Button,{color:"primary",onClick:this.saveAdd,disabled:!this.state.reviewContent},"Save"),r.default.createElement(o.Button,{color:"secondary",onClick:this.addToggle},"Cancel")))}},{key:"logout",value:function(){this.Auth.logout()}},{key:"messagesList",value:function(){var e=this;return this.state.revieweeList.map(function(t){return r.default.createElement("div",{className:"dashboard d-flex flex-row justify-content-between"},r.default.createElement("div",{className:"d-flex flex-row"},r.default.createElement("p",{className:"reviewee"},t.name),r.default.createElement("p",{className:"department text-muted"},e.state.user.department)),r.default.createElement("i",{"data-reviewee":t.name,onClick:e.add,className:"fa fa-plus"}))})}},{key:"render",value:function(){return 0===this.state.revieweeList.length?r.default.createElement("div",{className:"employee-profile d-flex flex-row"},r.default.createElement("div",{className:"sidebar"},r.default.createElement("img",{src:"https://www.paytm.ca/wp-content/uploads/thegem-logos/logo_1c55b24df15390a4bc761ca8db08e4c4_1x.png"}),r.default.createElement("div",{className:" d-flex flex-row user-info"},r.default.createElement("p",{className:"username"},this.state.user.username),r.default.createElement("p",{className:"text-muted department"},this.state.user.department)),r.default.createElement("div",{className:"d-flex flex-column"},r.default.createElement("p",{className:"messages"},"Messages",r.default.createElement("span",null,this.state.revieweeList.length)),r.default.createElement(i.Link,{className:"setting",to:"/"+this.state.user.username+"/setting"},"Setting"),r.default.createElement(i.Link,{className:"employee-logout",to:"/login",onClick:this.logout},"Log out"))),r.default.createElement("div",{className:"list"},r.default.createElement("div",{className:"header"},r.default.createElement("h1",null,"Required feedback list")),r.default.createElement("div",{className:"d-flex flex-column feedbacks"},r.default.createElement("h2",null,"No required feedbacks!")))):r.default.createElement("div",{className:"employee-profile d-flex flex-row"},r.default.createElement("div",{className:"sidebar"},r.default.createElement("img",{src:"https://www.paytm.ca/wp-content/uploads/thegem-logos/logo_1c55b24df15390a4bc761ca8db08e4c4_1x.png"}),r.default.createElement("div",{className:"d-flex flex-row user-info"},r.default.createElement("p",{className:"username"},this.state.user.username),r.default.createElement("p",{className:"text-muted department"},this.state.user.department)),r.default.createElement("div",{className:"d-flex flex-column"},r.default.createElement("p",{className:"messages"},"Messages",r.default.createElement("span",null,this.state.revieweeList.length)),r.default.createElement(i.Link,{className:"setting",to:"/"+this.state.user.username+"/setting"},"Setting"),r.default.createElement(i.Link,{className:"employee-logout",to:"/login",onClick:this.logout},"Log out"))),r.default.createElement("div",{className:"list"},r.default.createElement("div",{className:"header"},r.default.createElement("h1",null,"Required feedback list")),r.default.createElement("div",{className:"d-flex flex-column feedbacks"},this.messagesList()),this.addModal()))}}]),t}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),r=i(l),o=i(n(1)),s=n(4);function i(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={employees:[],reviewee:"",reviewers:[],message:"",modal:!1},n.Auth=new o.default,n.selectedReviewee=n.selectedReviewee.bind(n),n.selectedReviewer=n.selectedReviewer.bind(n),n.delete=n.delete.bind(n),n.assign=n.assign.bind(n),n.toggle=n.toggle.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),a(t,[{key:"componentDidMount",value:function(){var e=this;this.Auth.getEmployeeList().then(function(t){e.setState({employees:t.employees,reviewee:t.employees[0].username})})}},{key:"printEmployees",value:function(){return this.state.employees.map(function(e){return r.default.createElement("option",{value:e.username},e.username)})}},{key:"printReviewers",value:function(){var e=this;return this.state.reviewers.map(function(t){return r.default.createElement("div",{className:"reviewer d-flex flex-row"},r.default.createElement("p",null,t),r.default.createElement("span",{"data-reviewer":t,onClick:e.delete}," x"))})}},{key:"selectedReviewee",value:function(e){this.setState({reviewee:e.target.value})}},{key:"selectedReviewer",value:function(e){var t=this.state.reviewers;if(t.includes(e.target.value))return alert("The reviewer is already selected!");t.push(e.target.value),this.setState({reviewers:t})}},{key:"delete",value:function(e){var t=e.currentTarget.dataset.reviewer,n=this.state.reviewers.filter(function(e){return t!==e});this.setState({reviewers:n})}},{key:"assign",value:function(){var e=this;if(this.state.reviewers.includes(this.state.reviewee))return alert("Reviewer and reviewee can not be the same person!");this.Auth.assign(this.state.reviewee,this.state.reviewers).then(function(t){e.setState({message:t.message,modal:!e.state.modal})})}},{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"modal",value:function(){return r.default.createElement(s.Modal,{isOpen:this.state.modal,toggle:this.toggle},r.default.createElement(s.ModalBody,null,r.default.createElement("h3",null,this.state.message)),r.default.createElement(s.ModalFooter,null,r.default.createElement(s.Button,{color:"secondary",onClick:this.toggle},"Cancel")))}},{key:"render",value:function(){return r.default.createElement("div",{className:"assign"},r.default.createElement("div",{className:"header"},r.default.createElement("h1",null,"Assign reviews")),r.default.createElement("div",{className:"selecting"},r.default.createElement("div",{className:"select-reviewee"},r.default.createElement("h5",null,"Select Reviewee"),r.default.createElement("div",{className:"d-flex flex-row"},r.default.createElement("select",{value:this.state.reviewee,onChange:this.selectedReviewee},this.printEmployees()),r.default.createElement("h6",null,"Reviewee: ",r.default.createElement("span",null,this.state.reviewee)))),r.default.createElement("div",{className:"select-reviewers"},r.default.createElement("h5",null,"Select Reviewers"),r.default.createElement("div",{className:"d-flex flex-row"},r.default.createElement("select",{value:this.state.selectedReviewer,onChange:this.selectedReviewer},this.printEmployees()),r.default.createElement("div",null,r.default.createElement("h6",null,"Reviewers:"),r.default.createElement("div",{className:"d-flex flex-row reviewer-list"},this.printReviewers())))),r.default.createElement("button",{className:"btn btn-success",disabled:!this.state.reviewee||0===this.state.reviewers.length,onClick:this.assign},"Assign")),this.modal())}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),r=i(l),o=n(4),s=i(n(1));function i(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={user:{},employees:[],selectedEmployee:"",selectedReviews:[],employeeToAddReview:"",modalAdd:!1,modalEdit:!1,editedContent:"",reviewedBy:"",editFor:"",reviewId:""},n.Auth=new s.default,n.expandReviews=n.expandReviews.bind(n),n.isActive=n.isActive.bind(n),n.add=n.add.bind(n),n.addToggle=n.addToggle.bind(n),n.saveAdd=n.saveAdd.bind(n),n.handleChange=n.handleChange.bind(n),n.editToggle=n.editToggle.bind(n),n.edit=n.edit.bind(n),n.saveEdit=n.saveEdit.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),a(t,[{key:"componentDidMount",value:function(){var e=this;this.Auth.getEmployeeList().then(function(t){e.setState({employees:t.employees})});var t=this.Auth.getProfile();this.setState({user:t})}},{key:"addToggle",value:function(){this.setState({modalAdd:!this.state.modalAdd})}},{key:"add",value:function(e){var t=e.currentTarget.dataset.selectedemployee;this.setState({employeeToAddReview:t,modalAdd:!this.state.modalAdd})}},{key:"saveAdd",value:function(){var e=this;this.Auth.addReview(this.state.employeeToAddReview,this.state.reviewContent,this.state.user.user.username).then(function(){e.Auth.getReviews(e.state.employeeToAddReview).then(function(){e.setState({modalAdd:!e.state.modalAdd})})})}},{key:"editToggle",value:function(){this.setState({modalEdit:!this.state.modalEdit})}},{key:"edit",value:function(e){var t=e.currentTarget.dataset.editfor,n=e.currentTarget.dataset.editedcontent,a=e.currentTarget.dataset.reviewedby,l=e.currentTarget.dataset.reviewid;this.setState({editFor:t,editedContent:n,reviewedBy:a,reviewId:l,modalEdit:!this.state.modalEdit})}},{key:"saveEdit",value:function(){var e=this;this.Auth.updateReview(this.state.reviewId,this.state.editing,this.state.user.user.username).then(function(){e.Auth.getReviews(e.state.editFor).then(function(t){e.setState({selectedReviews:t.reviews,modalEdit:!e.state.modalEdit})})})}},{key:"isActive",value:function(e){return e===this.state.selectedEmployee}},{key:"handleChange",value:function(e){var t,n,a;this.setState((t={},n=e.target.name,a=e.target.value,n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t))}},{key:"expandReviews",value:function(e){var t=this,n=e.currentTarget.dataset.selectedemployee;if(this.isActive(n))return this.setState({selectedEmployee:""});this.Auth.getReviews(n).then(function(e){t.setState({selectedEmployee:n,selectedReviews:e.reviews})})}},{key:"addModal",value:function(){return r.default.createElement(o.Modal,{isOpen:this.state.modalAdd,toggle:this.addToggle},r.default.createElement(o.ModalHeader,{toggle:this.addToggle},r.default.createElement("h2",null,"Add new review for ",this.state.employeeToAddReview)),r.default.createElement(o.ModalBody,null,r.default.createElement("textarea",{name:"reviewContent",placeholder:"Enter review here",onChange:this.handleChange})),r.default.createElement(o.ModalFooter,null,r.default.createElement(o.Button,{color:"primary",onClick:this.saveAdd,disabled:!this.state.reviewContent},"Save"),r.default.createElement(o.Button,{color:"secondary",onClick:this.addToggle},"Cancel")))}},{key:"editModal",value:function(){return r.default.createElement(o.Modal,{isOpen:this.state.modalEdit,toggle:this.editToggle},r.default.createElement(o.ModalHeader,{toggle:this.editToggle},r.default.createElement("h2",null,"Edit review for ",this.state.editFor),r.default.createElement("small",null,"Reviewed by ",this.state.reviewedBy)),r.default.createElement(o.ModalBody,null,r.default.createElement("textarea",{name:"editing",placeholder:"Enter review here",onChange:this.handleChange},this.state.editedContent)),r.default.createElement(o.ModalFooter,null,r.default.createElement(o.Button,{color:"primary",onClick:this.saveEdit,disabled:!this.state.editing},"Save"),r.default.createElement(o.Button,{color:"secondary",onClick:this.editToggle},"Cancel")))}},{key:"printReviews",value:function(e){var t=this,n=this.isActive(e)?"expand-reviews":"";return 0===this.state.selectedReviews.length?r.default.createElement("div",{className:"employee-reviews "+n},r.default.createElement("div",{className:"cards"},r.default.createElement(o.Card,{className:"card"},r.default.createElement(o.CardBody,null,r.default.createElement("p",null,"No reviews for ",e," yet!"))))):r.default.createElement("div",{className:"employee-reviews "+n},r.default.createElement("div",{className:"cards"},this.state.selectedReviews.map(function(e){return r.default.createElement(o.Card,{className:"card"},r.default.createElement(o.CardBody,null,r.default.createElement("div",{className:"d-flex flex-row justify-content-between"},r.default.createElement("p",{className:"by-whom text-muted"},e.byWhom,":"),r.default.createElement("i",{onClick:t.edit,"data-editedcontent":e.content,"data-editfor":e.username,"data-reviewedby":e.byWhom,"data-reviewid":e._id,className:"fa fa-edit edit"})),r.default.createElement("p",{className:"content"},e.content)))})))}},{key:"printEmployees",value:function(){var e=this;return this.state.employees.map(function(t){var n=e.isActive(t.username)?"Collapse":"Open";return r.default.createElement("div",{className:"d-flex flex-column employee"},r.default.createElement("div",{className:"employee-dashboard d-flex flex-row justify-content-between"},r.default.createElement("div",{className:"d-flex flex-row"},r.default.createElement("p",{className:"name"},t.username),r.default.createElement("p",{className:"text-muted department"},t.department)),r.default.createElement("div",{className:"d-flex flex-row"},r.default.createElement("p",{className:"see-reviews","data-selectedemployee":t.username,onClick:e.expandReviews},n),r.default.createElement("i",{className:"fa fa-plus add","data-selectedemployee":t.username,onClick:e.add}))),e.printReviews(t.username))})}},{key:"render",value:function(){return r.default.createElement("div",{className:"reviews"},r.default.createElement("div",{className:"header"},r.default.createElement("h1",null,"Review list")),this.printEmployees(),this.addModal(),this.editModal())}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),r=i(l),o=i(n(1)),s=n(4);function i(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={employees:[],modalInfo:!1,modalEdit:!1,modalAdd:!1,modalDelete:!1,employeeInfo:{},department:"Front-end"},n.Auth=new o.default,n.info=n.info.bind(n),n.edit=n.edit.bind(n),n.delete=n.delete.bind(n),n.infoToggle=n.infoToggle.bind(n),n.editToggle=n.editToggle.bind(n),n.addToggle=n.addToggle.bind(n),n.deleteToggle=n.deleteToggle.bind(n),n.deleteConfirm=n.deleteConfirm.bind(n),n.handleChange=n.handleChange.bind(n),n.handleSelectChange=n.handleSelectChange.bind(n),n.saveEdit=n.saveEdit.bind(n),n.saveAdd=n.saveAdd.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),a(t,[{key:"componentDidMount",value:function(){var e=this;this.Auth.getEmployeeList().then(function(t){e.setState({employees:t.employees})})}},{key:"infoToggle",value:function(){this.setState({modalInfo:!this.state.modalInfo})}},{key:"editToggle",value:function(){this.setState({modalEdit:!this.state.modalEdit})}},{key:"addToggle",value:function(){this.setState({modalAdd:!this.state.modalAdd})}},{key:"deleteToggle",value:function(){this.setState({modalDelete:!this.state.modalDelete})}},{key:"saveAdd",value:function(){var e=this;if(this.state.password!==this.state.passwordConfirm)return alert("Passwords mismatch!");this.Auth.addEmployee(this.state.username,this.state.password,this.state.department).then(function(){e.Auth.getEmployeeList().then(function(t){e.setState({employees:t.employees,modalAdd:!e.state.modalAdd})})})}},{key:"info",value:function(e){var t=this,n=e.currentTarget.dataset.username;this.Auth.getEmployeeInfo(n).then(function(e){t.setState({employeeInfo:e.employeeInfo,modalInfo:!t.state.modalInfo},function(){console.log(t.state.employeeInfo.info)})})}},{key:"edit",value:function(e){var t=this,n=e.currentTarget.dataset.username;console.log(n),this.Auth.getEmployeeInfo(n).then(function(e){t.setState({employeeInfo:e.employeeInfo,modalEdit:!t.state.modalEdit})})}},{key:"saveEdit",value:function(){var e=this;this.Auth.updateEmployeeInfo(this.state.employeeInfo.username,this.state.department,this.state.email,this.state.phone,this.state.address).then(function(t){e.setState({employeeInfo:t.employeeInfo},function(){e.Auth.getEmployeeList().then(function(t){e.setState({employees:t.employees,modalEdit:!e.state.modalEdit})})})})}},{key:"delete",value:function(e){var t=e.currentTarget.dataset.username;console.log(t),this.setState({modalDelete:!this.state.modalDelete,deleteEmployee:t})}},{key:"deleteConfirm",value:function(){var e=this;this.Auth.deleteEmployee(this.state.deleteEmployee).then(function(){e.Auth.getEmployeeList().then(function(t){e.setState({employees:t.employees,modalDelete:!e.state.modalDelete})})})}},{key:"handleChange",value:function(e){var t,n,a;this.setState((t={},n=e.target.name,a=e.target.value,n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t))}},{key:"handleSelectChange",value:function(e){this.setState({department:e.target.value})}},{key:"infoModal",value:function(){return this.state.employeeInfo.info?r.default.createElement(s.Modal,{isOpen:this.state.modalInfo,toggle:this.infoToggle},r.default.createElement(s.ModalHeader,{toggle:this.infoToggle},r.default.createElement("h2",null,this.state.employeeInfo.username),r.default.createElement("small",null,this.state.employeeInfo.department)),r.default.createElement(s.ModalBody,null,r.default.createElement("p",null,"Email: ",this.state.employeeInfo.info.email),r.default.createElement("p",null,"Phone: ",this.state.employeeInfo.info.phone),r.default.createElement("p",null,"Address: ",this.state.employeeInfo.info.address)),r.default.createElement(s.ModalFooter,null,r.default.createElement(s.Button,{color:"secondary",onClick:this.infoToggle},"Cancel"))):r.default.createElement(s.Modal,{isOpen:this.state.modalInfo,toggle:this.infoToggle},r.default.createElement(s.ModalHeader,{toggle:this.infoToggle},r.default.createElement("h2",null,this.state.employeeInfo.username),r.default.createElement("small",null,this.state.employeeInfo.department)),r.default.createElement(s.ModalBody,null,"Oops! No Info available for ",this.state.employeeInfo.username),r.default.createElement(s.ModalFooter,null,r.default.createElement(s.Button,{color:"secondary",onClick:this.infoToggle},"Cancel")))}},{key:"editModal",value:function(){var e=this.state.employeeInfo.info?this.state.employeeInfo.info.email:"",t=this.state.employeeInfo.info?this.state.employeeInfo.info.phone:"",n=this.state.employeeInfo.info?this.state.employeeInfo.info.address:"";return r.default.createElement(s.Modal,{isOpen:this.state.modalEdit,toggle:this.editToggle},r.default.createElement(s.ModalHeader,{toggle:this.editToggle},r.default.createElement("h2",null,this.state.employeeInfo.username),r.default.createElement("small",null,this.state.employeeInfo.department)),r.default.createElement(s.ModalBody,null,r.default.createElement("select",{className:"form-control",value:this.state.department,onChange:this.handleSelectChange},r.default.createElement("option",{value:"Admin"},"Admin"),r.default.createElement("option",{value:"Front-end"},"Front-end"),r.default.createElement("option",{value:"Back-end"},"Back-end"),r.default.createElement("option",{value:"Full-stack"},"Full-stack"),r.default.createElement("option",{value:"Marketing"},"Marketing"),r.default.createElement("option",{value:"Finance"},"Finance"),r.default.createElement("option",{value:"HR"},"HR")),r.default.createElement("form",null,r.default.createElement("input",{type:"email",name:"email",placeholder:"Enter email",onChange:this.handleChange,className:"form-control",defaultValue:e}),r.default.createElement("input",{type:"text",name:"phone",placeholder:"Enter phone number",onChange:this.handleChange,className:"form-control",defaultValue:t}),r.default.createElement("input",{type:"text",name:"address",placeholder:"Enter address",onChange:this.handleChange,className:"form-control",defaultValue:n}))),r.default.createElement(s.ModalFooter,null,r.default.createElement(s.Button,{color:"primary",onClick:this.saveEdit},"Save"),r.default.createElement(s.Button,{color:"secondary",onClick:this.editToggle},"Cancel")))}},{key:"addModal",value:function(){return r.default.createElement(s.Modal,{className:"add-modal",isOpen:this.state.modalAdd,toggle:this.addToggle},r.default.createElement(s.ModalHeader,{className:"header",toggle:this.addToggle},r.default.createElement("h2",null,"Add new employee")),r.default.createElement(s.ModalBody,{className:"body"},r.default.createElement("select",{className:" select form-control",value:this.state.department,onChange:this.handleSelectChange},r.default.createElement("option",{value:"Admin"},"Admin"),r.default.createElement("option",{value:"Front-end"},"Front-end"),r.default.createElement("option",{value:"Back-end"},"Back-end"),r.default.createElement("option",{value:"Full-stack"},"Full-stack"),r.default.createElement("option",{value:"Marketing"},"Marketing"),r.default.createElement("option",{value:"Finance"},"Finance"),r.default.createElement("option",{value:"HR"},"HR")),r.default.createElement("form",null,r.default.createElement("input",{type:"text",name:"username",placeholder:"Enter username",onChange:this.handleChange,className:"form-control"}),r.default.createElement("input",{type:"password",name:"password",placeholder:"Enter password",onChange:this.handleChange,className:"form-control"}),r.default.createElement("input",{type:"password",name:"passwordConfirm",placeholder:"Confirm password",onChange:this.handleChange,className:"form-control"}))),r.default.createElement(s.ModalFooter,null,r.default.createElement(s.Button,{color:"primary",onClick:this.saveAdd,disabled:!this.state.username||!this.state.password||!this.state.passwordConfirm},"Save"),r.default.createElement(s.Button,{color:"secondary",onClick:this.addToggle},"Cancel")))}},{key:"deleteModal",value:function(){return r.default.createElement(s.Modal,{isOpen:this.state.modalDelete,toggle:this.deleteToggle},r.default.createElement(s.ModalBody,null,r.default.createElement("p",null,"Are you sure to delete employee: ",this.state.deleteEmployee)),r.default.createElement(s.ModalFooter,null,r.default.createElement(s.Button,{color:"danger",onClick:this.deleteConfirm},"Delete"),r.default.createElement(s.Button,{color:"secondary",onClick:this.deleteToggle},"Cancel")))}},{key:"printEmployees",value:function(){var e=this;return this.state.employees.map(function(t){return r.default.createElement("div",{className:"employee d-flex flex-row justify-content-between"},r.default.createElement("div",{className:"d-flex flex-row align-items-center"},r.default.createElement("p",{className:"name"},t.username),r.default.createElement("p",{className:"text-muted department "},t.department)),r.default.createElement("div",{className:"d-flex flex-row justify-content-between"},r.default.createElement("i",{className:"info fa fa-info",onClick:e.info,"data-username":t.username}),r.default.createElement("i",{className:"edit fa fa-edit",onClick:e.edit,"data-username":t.username}),r.default.createElement("i",{className:"delete fa fa-trash",onClick:e.delete,"data-username":t.username})))})}},{key:"render",value:function(){return r.default.createElement("div",{className:"employees"},r.default.createElement("div",{className:"header d-flex flex-row justify-content-between"},r.default.createElement("h2",{className:"title"},"Employee List"),r.default.createElement("i",{className:"fa fa-plus add",onClick:this.addToggle})),r.default.createElement("div",{className:"list"},this.printEmployees()),this.infoModal(),this.editModal(),this.addModal(),this.deleteModal())}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),r=c(l),o=c(n(13)),s=c(n(12)),i=c(n(11)),u=n(2),d=c(n(1));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={employees:!0,reviews:!1,assign:!1,selected:"employees"},n.Auth=new d.default,n.handleClick=n.handleClick.bind(n),n.logout=n.logout.bind(n),n.isActive=n.isActive.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),a(t,[{key:"selectedComponent",value:function(){return this.state.employees?r.default.createElement(o.default,null):this.state.reviews?r.default.createElement(s.default,null):r.default.createElement(i.default,null)}},{key:"render",value:function(){return r.default.createElement("div",{className:"admin-profile d-flex flex-row"},r.default.createElement("div",{className:"sidebar"},r.default.createElement("img",{src:"https://www.paytm.ca/wp-content/uploads/thegem-logos/logo_1c55b24df15390a4bc761ca8db08e4c4_1x.png"}),r.default.createElement("div",{className:"d-flex flex-row user-info"},r.default.createElement("p",{className:"username"},this.props.user.username),r.default.createElement("p",{className:"text-muted department"},this.props.user.department)),r.default.createElement("div",{className:"d-flex flex-column"},r.default.createElement("p",{className:this.isActive("employees")?"admin-active":"",onClick:this.handleClick,"data-selected":"employees"},"Employees"),r.default.createElement("p",{className:this.isActive("reviews")?"admin-active":"",onClick:this.handleClick,"data-selected":"reviews"},"Reviews"),r.default.createElement("p",{className:this.isActive("assign")?"admin-active":"",onClick:this.handleClick,"data-selected":"assign"},"Assign"),r.default.createElement(u.Link,{className:"admin-logout",to:"/login",onClick:this.logout},"Log out"))),this.selectedComponent())}},{key:"logout",value:function(){this.Auth.logout()}},{key:"isActive",value:function(e){return e===this.state.selected}},{key:"handleClick",value:function(e){var t=e.currentTarget.dataset.selected;return"reviews"===t?this.setState({employees:!1,reviews:!0,assign:!1,selected:"reviews"}):"assign"===t?this.setState({employees:!1,reviews:!1,assign:!0,selected:"assign"}):this.setState({employees:!0,reviews:!1,assign:!1,selected:"employees"})}}]),t}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),r=u(l),o=u(n(1)),s=u(n(14)),i=u(n(10));function u(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={user:{}},n.Auth=new o.default,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),a(t,[{key:"componentDidMount",value:function(){var e=location.pathname.replace(/%20/g," ").slice(1),t=this.Auth.getProfile();return this.Auth.getToken()?e!==t.user.username?this.props.history.replace("/login"):void this.setState({user:t.user}):this.props.history.replace("/login")}},{key:"render",value:function(){return"Admin"===this.state.user.department?r.default.createElement(s.default,{user:this.state.user}):r.default.createElement(i.default,{user:this.state.user})}}]),t}();t.default=d},,,function(e,t){e.exports=require("jwt-decode")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),r=i(l),o=n(2),s=i(n(1));function i(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={user:{},username:"",password:"",passwordConfirm:"",adminCode:""},n.Auth=new s.default,n.handleChange=n.handleChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),a(t,[{key:"componentDidMount",value:function(){var e=this,t=this.Auth.getProfile();this.setState({user:t},function(){console.log(e.state.user)})}},{key:"render",value:function(){return r.default.createElement("div",{className:"d-flex flex-column signup"},r.default.createElement("img",{src:"https://www.paytm.ca/wp-content/uploads/thegem-logos/logo_1c55b24df15390a4bc761ca8db08e4c4_1x.png"}),r.default.createElement("form",{onSubmit:this.handleSubmit},r.default.createElement("input",{type:"text",name:"username",placeholder:"Enter username",onChange:this.handleChange,className:"form-control"}),r.default.createElement("input",{type:"password",name:"password",placeholder:"Enter password",onChange:this.handleChange,className:"form-control"}),r.default.createElement("input",{type:"password",name:"passwordConfirm",placeholder:"Confirm password",onChange:this.handleChange,className:"form-control"}),r.default.createElement("input",{type:"password",name:"adminCode",placeholder:"Enter admin code",onChange:this.handleChange,className:"form-control"}),r.default.createElement("input",{type:"submit",value:"Save",className:"btn btn-success form-control",disabled:!(this.state.username&&this.state.password&&this.state.passwordConfirm&&this.state.adminCode)})),r.default.createElement("p",null,"Have an account ? ",r.default.createElement(o.Link,{to:"/login"},"Log In")))}},{key:"handleChange",value:function(e){var t,n,a;this.setState((t={},n=e.target.name,a=e.target.value,n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t))}},{key:"handleSubmit",value:function(e){var t=this;return e.preventDefault(),"admin1234"!==this.state.adminCode?alert("Invalid admin code!"):this.state.password!==this.state.passwordConfirm?alert("Passwords mismatch!"):void this.Auth.signUp(this.state.username,this.state.password,"Admin").then(function(e){t.props.history.replace("/"+t.state.username)})}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(n(19)),l=s(n(15)),r=s(n(9)),o=s(n(29));function s(e){return e&&e.__esModule?e:{default:e}}var i=[{path:"/",exact:!0,component:a.default},{path:"/login",exact:!0,component:r.default},{path:"/:username",exact:!0,component:l.default},{path:"/:username/setting",exact:!0,component:o.default}];t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=u(r),s=u(n(20)),i=n(2);function u(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),l(t,[{key:"render",value:function(){return o.default.createElement(i.Switch,null,s.default.map(function(e){var t=e.path,n=e.exact,l=e.component,r=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["path","exact","component"]);return o.default.createElement(i.Route,{key:t,path:t,exact:n,render:function(e){return o.default.createElement(l,a({},e,r))}})}))}}]),t}();t.default=d},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("jsonwebtoken")},function(e,t){e.exports=require("bcrypt-nodejs")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=m(n(5)),l=m(n(24)),r=m(n(23)),o=m(n(0)),s=n(2),i=n(22),u=m(n(21)),d=m(n(8)),c=m(n(7)),f=m(n(6));function m(e){return e&&e.__esModule?e:{default:e}}var h=a.default.Router({caseSensitive:!0});h.get("*",function(e,t,n){var a=(0,i.renderToString)(o.default.createElement(s.StaticRouter,{location:e.url,context:{}},o.default.createElement(u.default,null)));t.send('\n    <!DOCTYPE html>\n    <html>\n        <head>\n            <meta charset="utf-8">\n            <meta name="viewport" content="width=device-width, initial-scale=1">\n            <title>Paytm Labs</title>\n            <link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet">\n            <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">\n            <script src="https://use.fontawesome.com/b2bddaf3ba.js"><\/script>\n            <script type="text/javascript" src=\'/bundle.js\' defer><\/script>\n        </head>\n    <body>\n        <div id=\'app\'>'+a+"</div>\n    </body>\n    </html>\n    ")}),h.post("/signup",function(e,t,n){var a=e.body,o=a.username,s=a.password,i=a.department,u={username:o,password:l.default.hashSync(s,l.default.genSaltSync(10)),department:i};("Admin"===i?d.default:c.default).create(u).then(function(e){var n=r.default.sign({user:e},"jwt-secrect",{expiresIn:3600});t.json({success:!0,error:null,token:n})},function(e){"BulkWriteError"===e.name&&11e3===e.code&&t.json({success:!1,error:"User already exists!",token:null})})}),h.post("/login",function(e,t,n){var a=e.body,o=a.username,s=a.password;d.default.findOne({username:o}).then(function(e){if(null===e)c.default.findOne({username:o}).then(function(e){if(null===e)t.json({success:!1,error:"User does not exist!",token:null});else if(e.username===o&&l.default.compareSync(s,e.password)){var n=r.default.sign({user:e},"jwt-secrect",{expiresIn:3600});t.json({success:!0,error:null,token:n})}else t.json({success:!1,error:"Password incorrect!",token:null})},function(e){t.json({success:!1,error:e,token:null})});else if(e.username===o&&l.default.compareSync(s,e.password)){var n=r.default.sign({user:e},"jwt-secrect",{expiresIn:3600});t.json({success:!0,error:null,token:n})}else t.json({success:!1,error:"Password incorrect!",token:null})},function(e){t.json({success:!1,error:e,token:null})})}),h.post("/admin/:action",function(e,t,n){var a=e.params.action;if("employees"===a)c.default.find({}).then(function(e){t.json({employees:e})});else if("employeeinfo"===a){var r=e.body.username;c.default.findOne({username:r}).then(function(e){t.json({employeeInfo:e})})}else if("updateemployeeinfo"===a){var o=e.body,s=o.username,i=o.department,u=o.email,d=o.phone,m=o.address;c.default.findOneAndUpdate({username:s},{department:i,info:{email:u,phone:d,address:m}},{new:!0},function(e,n){if(e)throw e;t.json({employeeInfo:n})})}else if("delete"===a){var h=e.body.username;c.default.findOneAndRemove({username:h},function(e,n){if(e)throw e;t.json({deletedEmployee:n})})}else if("getreviews"===a){var p=e.body.username;f.default.find({username:p},function(e,n){if(e)throw e;t.json({reviews:n})})}else if("addreview"===a){var v=e.body,y={username:v.username,content:v.content,byWhom:v.byWhom};f.default.create(y,function(e,n){if(e)throw e;t.json({review:n})})}else if("updatereview"===a){var g=e.body,w=g.reviewId,b=g.content,E=g.byWhom;f.default.findByIdAndUpdate(w,{content:b,byWhom:E},{new:!0},function(e,n){if(e)throw e;t.json({updatedReview:n})})}else if("assign"===a){var k=e.body,C=k.reviewee;k.reviewers.map(function(e){c.default.findOne({username:e}).then(function(e){var t=e.list.filter(function(e){return e.name!==C});t.push({name:C}),c.default.findOneAndUpdate({username:e.username},{list:t},{new:!0},function(e){if(e)throw e})})}),t.json({message:"Successfully Assigned reviews!"})}else if("delete-reviewee-list"===a){var O=e.body,_=O.reviewee,S=O.reviewer;c.default.findOne({username:S}).then(function(e){var n=e.list.filter(function(e){return e.name!==_});c.default.findOneAndUpdate({username:e.username},{list:n},{new:!0},function(e,n){if(e)throw e;t.json({reviewer:n})})})}else if("set-employee-info"===a){var x=e.body,j=x.username,N=x.email,A=x.phone,P=x.address,T=x.password;c.default.findOneAndUpdate({username:j},{password:l.default.hashSync(T,l.default.genSaltSync(10)),"info.email":N,"info.phone":A,"info.address":P},{new:!0,upsert:!0},function(e,n){if(e)throw e;t.json({updatedInfo:n})})}}),t.default=h},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("cors")},function(e,t,n){"use strict";var a=s(n(5)),l=(s(n(27)),s(n(3))),r=s(n(26)),o=s(n(25));function s(e){return e&&e.__esModule?e:{default:e}}var i=process.env.MONGODB_URI||"mongodb://localhost:27017/paytm-labs",u=process.env.PORT||4e3,d=(0,a.default)();d.use(r.default.json()),d.use(a.default.static("public")),d.use(o.default),l.default.connect(i,function(e){e&&console.log(e)}),l.default.connection.on("connected",function(){console.log("Successfully opened a connection to "+i)}),l.default.connection.on("disconnected",function(){console.log("Disconnected from "+i)}),l.default.connection.on("error",function(){console.log("An error has occured connecting to "+i)}),d.listen(u,function(){console.log("Server is listening requests on "+u)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n(0),r=i(l),o=i(n(1)),s=n(4);function i(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={user:{},modal:!1},n.Auth=new o.default,n.handleChange=n.handleChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.toggle=n.toggle.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),a(t,[{key:"componentDidMount",value:function(){var e=this,t=this.Auth.getProfile();this.Auth.getEmployeeInfo(t.user.username).then(function(t){e.setState({user:t.employeeInfo},function(){console.log(e.state)})})}},{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"modal",value:function(){return r.default.createElement(s.Modal,{isOpen:this.state.modal,toggle:this.toggle},r.default.createElement(s.ModalBody,null,r.default.createElement("h3",null,"Saved!")),r.default.createElement(s.ModalFooter,null,r.default.createElement(s.Button,{color:"secondary",onClick:this.toggle},"Cancel")))}},{key:"render",value:function(){var e=this.state.user.info?this.state.user.info.email:"",t=this.state.user.info?this.state.user.info.phone:"",n=this.state.user.info?this.state.user.info.address:"";return r.default.createElement("div",{className:"setting-employee"},r.default.createElement("div",{className:"header d-flex flex-row"},r.default.createElement("h3",null,this.state.user.username),r.default.createElement("p",{className:"text-muted"},this.state.user.department)),r.default.createElement("form",{onSubmit:this.handleSubmit},r.default.createElement("input",{type:"text",name:"email",placeholder:"Enter email",defaultValue:e,onChange:this.handleChange,className:"form-control"}),r.default.createElement("input",{type:"text",name:"phone",placeholder:"Enter phone NO.",defaultValue:t,onChange:this.handleChange,className:"form-control"}),r.default.createElement("input",{type:"text",name:"address",placeholder:"Enter address",defaultValue:n,onChange:this.handleChange,className:"form-control"}),r.default.createElement("input",{type:"password",name:"password",placeholder:"Enter password",onChange:this.handleChange,className:"form-control"}),r.default.createElement("input",{type:"password",name:"passwordConfirm",placeholder:"Confirm password",onChange:this.handleChange,className:"form-control"}),r.default.createElement("input",{type:"submit",value:"Save",className:"btn btn-success form-control",disabled:!(this.state.email&&this.state.phone&&this.state.address&&this.state.password&&this.state.passwordConfirm)})),this.modal())}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),this.state.password!==this.state.passwordConfirm)return alert("Passwords mismatch");this.Auth.setEmployeeInfo(this.state.user.username,this.state.email,this.state.phone,this.state.address,this.state.password).then(function(e){t.setState({modal:!t.state.modal})})}},{key:"handleChange",value:function(e){var t,n,a;this.setState((t={},n=e.target.name,a=e.target.value,n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t))}}]),t}();t.default=u}]);